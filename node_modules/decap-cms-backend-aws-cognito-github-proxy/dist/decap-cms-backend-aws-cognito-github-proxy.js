!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("decap-cms-backend-github"),require("react"),require("decap-cms-ui-auth"),require("@emotion/react")):"function"==typeof define&&define.amd?define("DecapCmsBackendAwsCognitoGithubProxy",["decap-cms-backend-github","react","decap-cms-ui-auth","@emotion/react"],t):"object"==typeof exports?exports.DecapCmsBackendAwsCognitoGithubProxy=t(require("decap-cms-backend-github"),require("react"),require("decap-cms-ui-auth"),require("@emotion/react")):e.DecapCmsBackendAwsCognitoGithubProxy=t(e.DecapCmsBackendGithub,e.React,e.DecapCmsUiAuth,e.DecapCmsDefaultExports.EmotionCore)}(window,(e,t,r,o)=>(()=>{"use strict";var n={110:e=>{e.exports=o},119:e=>{e.exports=t},403:t=>{t.exports=e},484:e=>{e.exports=r}},i={};function c(e){var t=i[e];if(void 0!==t)return t.exports;var r=i[e]={exports:{}};return n[e](r,r.exports,c),r.exports}c.d=(e,t)=>{for(var r in t)c.o(t,r)&&!c.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var s={};c.d(s,{DecapCmsBackendAwsCognitoGithubProxy:()=>f});var a=c(403),u=(c(119),c(484)),p=c(110);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach(function(t){h(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function h(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class m extends a.GitHubBackend{constructor(e,t={}){super(e,t),this.bypassWriteAccessCheckForAppTokens=!0,this.tokenKeyword="Bearer"}authComponent(){const e=e=>{const t=d(d({},e),{},{backend:this});return(0,p.jsx)(u.PKCEAuthenticationPage,t)};return e.displayName="AuthenticationPage",e}async currentUser({token:e}){return this._currentUserPromise||(this._currentUserPromise=fetch(this.baseUrl+"/oauth2/userInfo",{headers:{Authorization:`${this.tokenKeyword} ${e}`}}).then(async e=>{if(401==e.status)return this.logout(),Promise.reject("Token expired");const t=await e.json(),r=this.originRepo.split("/")[1];return{name:t.email,login:r,avatar_url:`https://github.com/${r}.png`}})),this._currentUserPromise}async getPullRequestAuthor(e){var t;return null===(t=e.user)||void 0===t?void 0:t.login}}const f={AwsCognitoGitHubProxyBackend:m,API:a.API};return s.DecapCmsBackendAwsCognitoGithubProxy})());
//# sourceMappingURL=decap-cms-backend-aws-cognito-github-proxy.js.map