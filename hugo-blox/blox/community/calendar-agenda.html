{{/* Hugo Blox: Calendar - Agenda View - Elegant Edition */}}
{{/* Documentation: https://hugoblox.com/blocks/ */}}
{{/* License: https://github.com/HugoBlox/hugo-blox-builder/blob/main/LICENSE.md */}}

{{/* Initialise */}}
{{ $page := .wcPage }}
{{ $block := .wcBlock }}
{{ $title := $block.content.title | emojify | $page.RenderString }}
{{ $text := $block.content.text | emojify | $page.RenderString }}
{{ $blue := $block.content.blue | emojify | $page.RenderString }}

{{/* Elegant Click-to-Load Calendar */}}
<div class="mx-auto max-w-7xl mt-0 px-4 sm:px-6 lg:px-8 pt-8 sm:pt-12 lg:pt-16 pb-8 sm:pb-12 lg:pb-16">
    
  <!-- Header Section with Elegant Typography -->
  <div class="flex flex-col mb-12 sm:mb-16 text-center">
    {{ with $blue }}
    <div class="inline-flex items-center justify-center px-4 py-2 mb-6 mx-auto rounded-full bg-gradient-to-r from-primary-100 to-primary-200 dark:from-primary-900/30 dark:to-primary-800/30 border border-primary-200 dark:border-primary-700/50">
      <p class="text-sm sm:text-base font-semibold tracking-wider uppercase text-primary-700 dark:text-primary-300">{{.}}</p>
    </div>
    {{ end }}
    
    {{ with $title }}
    <h2 class="mb-6 text-4xl sm:text-5xl lg:text-6xl font-bold bg-gradient-to-r from-gray-900 via-primary-800 to-gray-900 dark:from-white dark:via-primary-200 dark:to-gray-100 bg-clip-text text-transparent leading-tight">{{.}}</h2>
    {{ end }}
    
    {{ with $text }}
    <p class="text-xl sm:text-2xl lg:text-3xl text-gray-600 dark:text-gray-300 font-light leading-relaxed max-w-4xl mx-auto">{{.}}</p>
    {{ end }}
  </div>
    
  <!-- Elegant Calendar Container with Glass Morphism -->
  <div class="relative">
    <!-- Background Glow Effect -->
    <div class="absolute -inset-1 bg-gradient-to-r from-primary-500 via-purple-500 to-primary-600 rounded-2xl blur-lg opacity-20 dark:opacity-30 animate-pulse"></div>
    
    <!-- Main Calendar Container -->
    <div class="relative bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl rounded-2xl border border-white/20 dark:border-gray-700/30 shadow-2xl overflow-hidden">
      
      <!-- Elegant Click to Load Button with Perfect Vertical Centering -->
      <div id="calendar-trigger" 
           class="calendar-container group relative cursor-pointer transition-all duration-500 ease-out hover:scale-[1.02] active:scale-[0.98] flex items-center justify-center">
        
        <!-- Gradient Background -->
        <div class="absolute inset-0 bg-gradient-to-br from-primary-50 via-purple-50 to-primary-100 dark:from-gray-800 dark:via-purple-900/20 dark:to-primary-900/30 opacity-60 group-hover:opacity-80 transition-opacity duration-500"></div>
        
        <!-- Animated Particles/Dots Background -->
        <div class="absolute inset-0 overflow-hidden">
          <div class="absolute top-1/4 left-1/4 w-2 h-2 bg-primary-400/30 rounded-full animate-ping" style="animation-delay: 0s;"></div>
          <div class="absolute top-3/4 right-1/3 w-1 h-1 bg-purple-400/40 rounded-full animate-ping" style="animation-delay: 1s;"></div>
          <div class="absolute bottom-1/3 left-1/2 w-1.5 h-1.5 bg-primary-300/30 rounded-full animate-ping" style="animation-delay: 2s;"></div>
          <div class="absolute top-1/2 right-1/4 w-1 h-1 bg-purple-300/30 rounded-full animate-ping" style="animation-delay: 1.5s;"></div>
        </div>
        
        <!-- Centered Content Container -->
        <div class="relative z-10 flex flex-col items-center justify-center text-center px-6 sm:px-8 lg:px-12">
          
          <!-- Large Icon with Advanced Styling -->
          <div class="relative mb-6 sm:mb-8">
            <!-- Icon Glow Background -->
            <div class="absolute inset-0 bg-gradient-to-r from-primary-400 to-purple-500 rounded-full blur-2xl opacity-30 scale-150 group-hover:opacity-50 group-hover:scale-175 transition-all duration-700"></div>
            
            <!-- Large Icon Container -->
            <div class="relative icon-container bg-gradient-to-br from-white to-primary-50 dark:from-gray-700 dark:to-primary-900/50 rounded-full shadow-2xl border-2 border-white/40 dark:border-gray-600/40 flex items-center justify-center group-hover:shadow-primary-500/25 group-hover:shadow-3xl transition-all duration-500 transform group-hover:-translate-y-1">
              
              <!-- Large Calendar SVG -->
              <svg class="icon-svg text-primary-600 dark:text-primary-400 group-hover:text-primary-700 dark:group-hover:text-primary-300 transition-colors duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
              </svg>
              
              <!-- Subtle Inner Glow -->
              <div class="absolute inset-3 bg-gradient-to-br from-primary-100/50 to-transparent dark:from-primary-800/20 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
            </div>
          </div>
          
          <!-- Typography with Enhanced Styling -->
          <div class="space-y-3 sm:space-y-4">
            <h3 class="calendar-title font-bold bg-gradient-to-r from-gray-800 via-primary-700 to-purple-700 dark:from-gray-100 dark:via-primary-300 dark:to-purple-300 bg-clip-text text-transparent group-hover:from-primary-700 group-hover:via-purple-600 group-hover:to-primary-800 dark:group-hover:from-primary-200 dark:group-hover:via-purple-200 dark:group-hover:to-primary-300 transition-all duration-500">
              Load Calendar
            </h3>
            
            <p class="calendar-subtitle text-gray-600 dark:text-gray-300 font-medium leading-relaxed group-hover:text-gray-700 dark:group-hover:text-gray-200 transition-colors duration-300 max-w-sm mx-auto">
              Discover upcoming events and gatherings
            </p>
            
            <!-- Call-to-Action Hint -->
            <div class="pt-2 sm:pt-4">
              <div class="inline-flex items-center space-x-2 px-3 sm:px-4 py-2 bg-gradient-to-r from-primary-100 to-purple-100 dark:from-primary-900/30 dark:to-purple-900/30 rounded-full border border-primary-200/50 dark:border-primary-700/30 group-hover:border-primary-300/70 dark:group-hover:border-primary-600/50 transition-all duration-300">
                <svg class="w-3 h-3 sm:w-4 sm:h-4 text-primary-600 dark:text-primary-400 group-hover:translate-x-0.5 transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"></path>
                </svg>
                <span class="text-xs sm:text-sm font-semibold text-primary-700 dark:text-primary-300">Click to explore</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Calendar iframe with Enhanced Styling -->
    <iframe 
      id="calendar-iframe"
      class="calendar-iframe relative bg-white dark:bg-gray-900 rounded-2xl shadow-2xl border border-gray-200/50 dark:border-gray-700/50"
      style="display: none; width: 100%; border: none;"
      frameborder="0" 
      scrolling="yes"
      title="Fellowship Gatherings">
    </iframe>
  </div>
</div>

<script>
(function() {
  'use strict';
  
  function ready(fn) {
    if (document.readyState !== 'loading') {
      fn();
    } else {
      document.addEventListener('DOMContentLoaded', fn);
    }
  }
  
  ready(function() {
    var trigger = document.getElementById('calendar-trigger');
    var iframe = document.getElementById('calendar-iframe');
    
    if (!trigger || !iframe) return;
    
    function loadCalendar() {
      // Enhanced loading state with vertical centering
      trigger.innerHTML = 
        '<div class="absolute inset-0 bg-gradient-to-br from-primary-50 via-purple-50 to-primary-100 dark:from-gray-800 dark:via-purple-900/20 dark:to-primary-900/30"></div>' +
        '<div class="relative z-10 flex flex-col items-center justify-center text-center px-6 sm:px-8">' +
          '<div class="relative mb-6">' +
            '<div class="absolute inset-0 bg-gradient-to-r from-primary-400 to-purple-500 rounded-full blur-xl opacity-30 scale-150 animate-pulse"></div>' +
            '<div class="relative w-20 h-20 sm:w-24 sm:h-24 lg:w-32 lg:h-32 bg-gradient-to-br from-white to-primary-50 dark:from-gray-700 dark:to-primary-900/50 rounded-full shadow-2xl flex items-center justify-center">' +
              '<div class="w-8 h-8 sm:w-10 sm:h-10 lg:w-12 lg:h-12 border-3 border-primary-300 dark:border-primary-500 border-t-primary-600 dark:border-t-primary-400 rounded-full animate-spin"></div>' +
            '</div>' +
          '</div>' +
          '<p class="text-base sm:text-lg lg:text-xl font-semibold bg-gradient-to-r from-gray-700 to-primary-700 dark:from-gray-200 dark:to-primary-300 bg-clip-text text-transparent animate-pulse">Loading your calendar...</p>' +
        '</div>';
      
      iframe.src = "https://calendar.google.com/calendar/embed?src=YW5nZWxsZWNpdGVsQGdtYWlsLmNvbQ&ctz=Europe%2FLondon&hl=en_GB&wkst=2&mode=AGENDA";
      
      iframe.onload = function() {
        trigger.style.display = 'none';
        iframe.style.display = 'block';
      };
    }
    
    if (trigger.addEventListener) {
      trigger.addEventListener('click', loadCalendar, false);
    } else if (trigger.attachEvent) {
      trigger.attachEvent('onclick', loadCalendar);
    }
  });
})();
</script>

<style>
/* Responsive Calendar Container Heights with Perfect Centering */
.calendar-container {
  min-height: 400px;
}

@media (min-width: 640px) {
  .calendar-container {
    min-height: 480px;
  }
}

@media (min-width: 1024px) {
  .calendar-container {
    min-height: 550px;
  }
}

/* Responsive Large Icon Sizing */
.icon-container {
  width: 5rem;  /* 80px */
  height: 5rem; /* 80px */
}

.icon-svg {
  width: 2.5rem;  /* 40px */
  height: 2.5rem; /* 40px */
}

@media (min-width: 640px) {
  .icon-container {
    width: 6rem;    /* 96px */
    height: 6rem;   /* 96px */
  }
  
  .icon-svg {
    width: 3rem;    /* 48px */
    height: 3rem;   /* 48px */
  }
}

@media (min-width: 1024px) {
  .icon-container {
    width: 8rem;    /* 128px */
    height: 8rem;   /* 128px */
  }
  
  .icon-svg {
    width: 4rem;    /* 64px */
    height: 4rem;   /* 64px */
  }
}

@media (min-width: 1280px) {
  .icon-container {
    width: 9rem;    /* 144px */
    height: 9rem;   /* 144px */
  }
  
  .icon-svg {
    width: 4.5rem;  /* 72px */
    height: 4.5rem; /* 72px */
  }
}

/* Responsive Typography */
.calendar-title {
  font-size: 1.25rem;  /* 20px */
  line-height: 1.2;
}

.calendar-subtitle {
  font-size: 0.875rem; /* 14px */
  line-height: 1.4;
}

@media (min-width: 640px) {
  .calendar-title {
    font-size: 1.5rem;   /* 24px */
    line-height: 1.2;
  }
  
  .calendar-subtitle {
    font-size: 1rem;     /* 16px */
    line-height: 1.4;
  }
}

@media (min-width: 1024px) {
  .calendar-title {
    font-size: 2rem;     /* 32px */
    line-height: 1.2;
  }
  
  .calendar-subtitle {
    font-size: 1.125rem; /* 18px */
    line-height: 1.4;
  }
}

@media (min-width: 1280px) {
  .calendar-title {
    font-size: 2.25rem;  /* 36px */
    line-height: 1.1;
  }
  
  .calendar-subtitle {
    font-size: 1.25rem;  /* 20px */
    line-height: 1.4;
  }
}

/* Responsive Calendar iframe */
.calendar-iframe {
  height: 500px;
}

@media (min-width: 640px) {
  .calendar-iframe {
    height: 600px;
  }
}

@media (min-width: 1024px) {
  .calendar-iframe {
    height: 700px;
  }
}

/* Advanced Hover Effects */
@media (hover: hover) {
  .calendar-container:hover {
    transform: translateY(-2px) scale(1.02);
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.15);
  }
}

/* Custom Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-10px); }
}

@keyframes glow {
  0%, 100% { opacity: 0.5; }
  50% { opacity: 0.8; }
}

/* Glass Morphism Enhancement */
.calendar-container::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0));
  pointer-events: none;
  border-radius: 1rem;
}

/* Dark Theme Enhancements */
@media (prefers-color-scheme: dark) {
  .calendar-container::before {
    background: linear-gradient(135deg, rgba(255,255,255,0.05), rgba(255,255,255,0));
  }
}

/* Touch Device Optimizations */
@media (hover: none) and (pointer: coarse) {
  .calendar-container:hover {
    transform: none;
  }
  
  .calendar-container:active {
    transform: scale(0.98);
    transition: transform 0.1s ease-out;
  }
}

/* Accessibility Improvements */
.calendar-container:focus {
  outline: 2px solid rgb(59 130 246);
  outline-offset: 2px;
}

@media (prefers-reduced-motion: reduce) {
  .animate-ping,
  .animate-pulse,
  .animate-spin {
    animation: none;
  }
  
  .calendar-container,
  .calendar-container * {
    transition: none !important;
  }
}
</style>
