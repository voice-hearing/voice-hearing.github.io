{{/* Hugo Blox: Calendar - Agenda View - Clean Edition */}}
{{/* Documentation: https://hugoblox.com/blocks/ */}}
{{/* License: https://github.com/HugoBlox/hugo-blox-builder/blob/main/LICENSE.md */}}

{{/* Initialise */}}
{{ $page := .wcPage }}
{{ $block := .wcBlock }}
{{ $title := $block.content.title | emojify | $page.RenderString }}
{{ $text := $block.content.text | emojify | $page.RenderString }}
{{ $blue := $block.content.blue | emojify | $page.RenderString }}

{{/* Clean Click-to-Load Calendar */}}
<div class="mx-auto max-w-7xl mt-0 pb-4">
    
  <!-- Header Section with Clean Typography -->
  <div class="flex flex-col text-center">
    {{ with $blue }}
  <p class="mb-2 text-lg md:text-xl tracking-tight uppercase font-semibold text-primary-600 dark:text-primary-300">{{.}}</p>
    </div>
    {{ end }}
    
  <div class="md:px-6 lg:px-0">
  <!-- Red horizontal line above title -->
  <div class="w-16 border-2 border-primary-700 mb-4"></div>
      
  {{ with $title }}
  <h2 class="mb-4 text-3xl font-bold dark:font-semibold text-gray-900 dark:text-white">{{.}}</h2>
  {{ end }}</div>
    
    {{ with $text }}
  <p class="text-xl md:text-2xl text-gray-500 dark:text-gray-400">{{.}}</p>
    {{ end }}
  </div>
    
  <!-- Clean Calendar Container -->
  <div class="relative">
    <!-- Main Calendar Container -->
    <div class="relative bg-white dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700 shadow-lg overflow-hidden">
      
      <!-- Clean Click to Load Button -->
      <div id="calendar-trigger" 
           class="calendar-container group relative cursor-pointer transition-all duration-300 ease-out hover:bg-gray-50 dark:hover:bg-gray-800 active:scale-[0.99] flex items-center justify-center">
        
        <!-- Simple Background -->
        <div class="absolute inset-0 bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-850 opacity-50"></div>
        
        <!-- Centered Content Container -->
        <div class="relative z-10 flex flex-col items-center justify-center text-center px-6 sm:px-8 lg:px-12 py-8">
          
          <!-- Large Clean Icon -->
          <div class="relative mb-6 sm:mb-8">
            <!-- Clean Icon Container -->
            <div class="relative icon-container bg-white dark:bg-gray-700 rounded-lg shadow-lg border border-gray-200 dark:border-gray-600 flex items-center justify-center transition-all duration-300 group-hover:shadow-xl group-hover:-translate-y-0.5">
              
              <!-- Calendar SVG -->
              <svg class="icon-svg text-primary-600 dark:text-primary-400 transition-colors duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
              </svg>
            </div>
          </div>
          
          <!-- Clean Typography -->
          <div class="space-y-3 sm:space-y-4">
            <h3 class="calendar-title font-bold text-gray-900 dark:text-white">
              Load Calendar
            </h3>
            
            <p class="calendar-subtitle text-gray-600 dark:text-gray-300 font-medium leading-relaxed max-w-sm mx-auto">
              Discover upcoming events and gatherings
            </p>
            
            <!-- Clean Call-to-Action -->
            <div class="pt-2 sm:pt-4">
              <div class="inline-flex items-center space-x-2 px-2 py-2 bg-primary-100 dark:bg-primary-900/30 rounded-lg border border-primary-200 dark:border-primary-700/50 transition-all duration-300">
                <svg class="w-4 h-4 text-primary-600 dark:text-primary-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"></path>
                </svg>
                <span class="text-sm font-semibold text-primary-700 dark:text-primary-900">Click to explore</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Calendar iframe -->
    <iframe 
      id="calendar-iframe"
      class="calendar-iframe relative bg-white dark:bg-gray-900 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700"
      style="display: none; width: 100%; border: none;"
      frameborder="0" 
      scrolling="yes"
      title="Fellowship Gatherings">
    </iframe>
  </div>
</div>

<script>
(function() {
  'use strict';
  
  function ready(fn) {
    if (document.readyState !== 'loading') {
      fn();
    } else {
      document.addEventListener('DOMContentLoaded', fn);
    }
  }
  
  ready(function() {
    var trigger = document.getElementById('calendar-trigger');
    var iframe = document.getElementById('calendar-iframe');
    
    if (!trigger || !iframe) return;
    
    function loadCalendar() {
      // Clean loading state
      trigger.innerHTML = 
        '<div class="absolute inset-0 bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-850 opacity-50"></div>' +
        '<div class="relative z-10 flex flex-col items-center justify-center text-center px-6 sm:px-8 py-8">' +
          '<div class="relative mb-6">' +
            '<div class="relative w-16 h-16 sm:w-20 sm:h-20 lg:w-24 lg:h-24 bg-white dark:bg-gray-700 rounded-full shadow-lg border border-gray-200 dark:border-gray-600 flex items-center justify-center">' +
              '<div class="w-8 h-8 sm:w-10 sm:h-10 lg:w-12 lg:h-12 border-2 border-gray-300 dark:border-gray-500 border-t-primary-600 dark:border-t-primary-400 rounded-full animate-spin"></div>' +
            '</div>' +
          '</div>' +
          '<p class="text-base sm:text-lg font-semibold text-gray-900 dark:text-white">Loading your calendar...</p>' +
        '</div>';
      
      iframe.src = "https://calendar.google.com/calendar/embed?src=YW5nZWxsZWNpdGVsQGdtYWlsLmNvbQ&ctz=Europe%2FLondon&hl=en_GB&wkst=2&mode=AGENDA";
      
      iframe.onload = function() {
        trigger.style.display = 'none';
        iframe.style.display = 'block';
      };
    }
    
    if (trigger.addEventListener) {
      trigger.addEventListener('click', loadCalendar, false);
    } else if (trigger.attachEvent) {
      trigger.attachEvent('onclick', loadCalendar);
    }
  });
})();
</script>

<style>
/* Responsive Calendar Container Heights */
.calendar-container {
  min-height: 350px;
}

@media (min-width: 640px) {
  .calendar-container {
    min-height: 400px;
  }
}

@media (min-width: 1024px) {
  .calendar-container {
    min-height: 450px;
  }
}

/* Responsive Large Icon Sizing */
.icon-container {
  width: 4rem;  /* 64px */
  height: 4rem; /* 64px */
}

.icon-svg {
  width: 2rem;  /* 32px */
  height: 2rem; /* 32px */
}

@media (min-width: 640px) {
  .icon-container {
    width: 5rem;    /* 80px */
    height: 5rem;   /* 80px */
  }
  
  .icon-svg {
    width: 2.5rem;    /* 40px */
    height: 2.5rem;   /* 40px */
  }
}

@media (min-width: 1024px) {
  .icon-container {
    width: 6rem;    /* 96px */
    height: 6rem;   /* 96px */
  }
  
  .icon-svg {
    width: 3rem;    /* 48px */
    height: 3rem;   /* 48px */
  }
}

@media (min-width: 1280px) {
  .icon-container {
    width: 7rem;    /* 112px */
    height: 7rem;   /* 112px */
  }
  
  .icon-svg {
    width: 3.5rem;  /* 56px */
    height: 3.5rem; /* 56px */
  }
}

/* Responsive Typography */
.calendar-title {
  font-size: 1.125rem;  /* 18px */
  line-height: 1.2;
}

.calendar-subtitle {
  font-size: 0.875rem; /* 14px */
  line-height: 1.4;
}

@media (min-width: 640px) {
  .calendar-title {
    font-size: 1.25rem;   /* 20px */
    line-height: 1.2;
  }
  
  .calendar-subtitle {
    font-size: 0.875rem;     /* 14px */
    line-height: 1.4;
  }
}

@media (min-width: 1024px) {
  .calendar-title {
    font-size: 1.5rem;     /* 24px */
    line-height: 1.2;
  }
  
  .calendar-subtitle {
    font-size: 1rem; /* 16px */
    line-height: 1.4;
  }
}

@media (min-width: 1280px) {
  .calendar-title {
    font-size: 1.75rem;  /* 28px */
    line-height: 1.1;
  }
  
  .calendar-subtitle {
    font-size: 1.125rem;  /* 18px */
    line-height: 1.4;
  }
}

/* Responsive Calendar iframe */
.calendar-iframe {
  height: 500px;
}

@media (min-width: 640px) {
  .calendar-iframe {
    height: 600px;
  }
}

@media (min-width: 1024px) {
  .calendar-iframe {
    height: 700px;
  }
}

/* Simple Hover Effects */
@media (hover: hover) {
  .calendar-container:hover {
    transform: translateY(-1px);
    box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
  }
}

/* Touch Device Optimizations */
@media (hover: none) and (pointer: coarse) {
  .calendar-container:hover {
    transform: none;
    background-color: transparent;
  }
  
  .calendar-container:active {
    transform: scale(0.99);
    transition: transform 0.1s ease-out;
  }
}

/* Accessibility */
.calendar-container:focus {
  outline: 2px solid rgb(59 130 246);
  outline-offset: 2px;
}

@media (prefers-reduced-motion: reduce) {
  .animate-spin {
    animation: none;
  }
  
  .calendar-container,
  .calendar-container * {
    transition: none !important;
  }
}
</style>
