{{/* Hugo Blox: Subscribe */}}
{{/* Documentation: https://hugoblox.com/blocks/ */}}
{{/* License: https://github.com/HugoBlox/hugo-blox-builder/blob/main/LICENSE.md */}}

{{/* Initialise */}}
{{ $page := .wcPage }}
{{ $block := .wcBlock }}
{{ $title := $block.content.title | emojify | $page.RenderString }}
{{ $text := $block.content.text | emojify | $page.RenderString }}
{{ $blue := $block.content.blue | emojify | $page.RenderString }}
{{ $name := $block.content.name | emojify | $page.RenderString }}
{{ $role := $block.content.role | emojify | $page.RenderString }}
{{ $text_cta := ($block.content.text_cta | default "") | markdownify }}
{{ $description := ($block.content.description | default "") | markdownify }}
{{ $button_text := $block.content.button.text | default "Subscribe" }}
{{ $text_privacy := $block.content.text_privacy | emojify | $page.RenderString }}
{{ $form_action := $block.content.form_action | default "#" }}

<section>
  <!-- Header Section -->
  <div class="mx-auto max-w-screen-xl py-8 px-8">
    <div class="max-w-screen-md mb-8 lg:mb-16 flex flex-col justify-center mx-auto px-8">
      {{ with $blue }}
      <p class="mb-4 text-xl text-center tracking-tight uppercase font-semibold text-primary-600 dark:text-primary-300">{{.}}</p>
      {{ end }}      
      {{ with $title }}
      <h2 class="mb-4 text-4xl tracking-tight font-extrabold text-gray-900 dark:text-white text-center">{{.}}</h2>
      {{ end }}
      {{ with $text }}
      <p class="text-gray-500 text-2xl dark:text-gray-400 text-center">{{.}}</p>
      {{ end }}
    </div>

    <!-- Two Column Layout -->
    <div class="space-y-8 items-center md:grid md:grid-cols-2 lg:grid-cols-2 gap-8 md:space-y-0">
      
      <!-- Left Column: Content -->
      <div x-data="emailSignup()" x-init="trackFormVisit()" class="relative mx-auto items-center">
        <div>
          <p class="font-display text-2xl font-bold tracking-tighter">{{$name}}</p>
          <p class="mt-4 text-xl">{{$role}}</p>
        </div>
      </div>
      
      <!-- Right Column: Newsletter Signup Form -->
      <div>
        <form action="{{ $form_action }}" method="post">
          <div class="form-preview">
            <div class="preview-heading text-xl text-gray-800 dark:text-gray-300 mb-8">
              <h3>{{$text_cta}}</h3>
            </div>
            
            <!-- Email Input Field -->
            <div class="preview-input-field mb-4">
              <input type="email" 
                     name="email" 
                     class="py-3 px-4 block w-full form-input relative inline-flex items-center gap-1 rounded-md border border-gray-300 bg-white px-3 py-2 pl-4 text-sm font-medium text-gray-500 hover:bg-gray-50 focus:z-20 dark:border-gray-500 dark:bg-gray-800 dark:text-gray-300" 
                     required 
                     placeholder="{{ i18n "contact_email" | default "Email" }}" 
                     spellcheck="false">
            </div>
            
            <!-- Terms and Conditions -->
            {{ if $description }}
            <div class="terms-container text-left mb-4 px-4">
              <label class="text-xl text-secondary purchase__terms" for="terms-accept">
                <input class="mr-1 mt-8 rounded-sm text-justify" 
                       type="checkbox" 
                       id="terms-accept" 
                       name="terms" 
                       value="1" 
                       required>
                {{$description}}
              </label>
            </div>
            {{ end }}
            
            <!-- Submit Button -->
            <div class="text-center">
              <div class="preview-submit-button relative inline-flex items-center gap-1 rounded-full border border-gray-300 bg-white px-6 py-2 text-xl font-medium focus:z-20 dark:border-gray-500 dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200">
                <button type="submit">{{ $button_text }}</button>
              </div>
            </div>
          </div>
        </form>
      </div>
      
    </div>
  </div>
</section>
