{{/* Hugo Blox Logo Block - Working Version */}}
<style>
  .logo-block { padding: 2rem 1rem; }
  .logo-block img { max-height: 48px; width: auto; }
</style>

{{ $page := .wcPage }}
{{ $block := .wcBlock }}

<div class="logo-block bg-gray-900 py-16">
  <div class="mx-auto max-w-7xl px-6">
    
    {{ if and $block.content $block.content.title }}
    <h2 class="text-center text-lg font-semibold text-white mb-10">
      {{ $block.content.title }}
    </h2>
    {{ end }}

    {{ if $block.content.logos }}
      <div class="mx-auto mt-10 grid max-w-lg grid-cols-4 items-center gap-x-8 gap-y-10 sm:max-w-xl sm:grid-cols-6 sm:gap-x-10 lg:mx-0 lg:max-w-none lg:grid-cols-5">
        {{ range $index, $logo := $block.content.logos }}
          
          {{ if strings.HasPrefix $logo.image "http" }}
            {{/* Remote image - use direct src */}}
            {{ if $logo.url }}
              <a href="{{ $logo.url }}" target="_blank" rel="noopener noreferrer" class="col-span-2 max-h-12 w-full hover:opacity-75 transition-opacity duration-200 lg:col-span-1">
                <img src="{{ $logo.image }}" 
                     alt="{{ $logo.name }}" 
                     class="max-h-12 w-full object-contain" 
                     loading="lazy">
              </a>
            {{ else }}
              <img src="{{ $logo.image }}" 
                   alt="{{ $logo.name }}" 
                   class="col-span-2 max-h-12 w-full object-contain lg:col-span-1" 
                   loading="lazy">
            {{ end }}
          {{ else }}
            {{/* Local image - process with Hugo */}}
            {{ $image_resource := resources.GetMatch $logo.image }}
            {{ if $image_resource }}
              {{ $resized := $image_resource.Fit "x48 q85 webp" }}
              {{ if $logo.url }}
                <a href="{{ $logo.url }}" target="_blank" rel="noopener noreferrer" class="col-span-2 max-h-12 w-full hover:opacity-75 transition-opacity duration-200 lg:col-span-1">
                  <img src="{{ $resized.RelPermalink }}" 
                       alt="{{ $logo.name }}" 
                       class="max-h-12 w-full object-contain" 
                       loading="lazy">
                </a>
              {{ else }}
                <img src="{{ $resized.RelPermalink }}" 
                     alt="{{ $logo.name }}" 
                     class="col-span-2 max-h-12 w-full object-contain lg:col-span-1" 
                     loading="lazy">
              {{ end }}
            {{ end }}
          {{ end }}
          
        {{ end }}
      </div>
    {{ end }}
  </div>
</div>
