{{- $folder := .Get "folder" | default "media/logos" -}}
{{- $quality := .Get "quality" | default "75" -}}

{{- $images := resources.Match (printf "%s/*.{jpg,jpeg,png,gif,svg,webp}" $folder) -}}
{{- if $images }}

<style>
.grid-logo {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 1.5rem;
  align-items: center;
  justify-items: center;
}

@media (min-width: 768px) {
  .grid-logo {
    grid-template-columns: repeat(6, minmax(0, 1fr));
  }
}

.logo-container {
  display: flex;
  justify-content: center;
  align-items: center;
  width: 100%;
  height: 96px;
}

.logo-container img {
  height: 96px;
  width: 100%;
  object-fit: contain;
  transition: opacity 0.3s ease;
}

.logo-container img:hover {
  opacity: 0.75;
}
</style>

<div class="mx-auto max-w-7xl px-6 py-12">
  <div class="grid-logo">
    {{- range $images }}
      {{- $resized := .Resize (printf "x96 q%s webp" $quality) -}}
      <div class="logo-container">
        <img src="{{ $resized.RelPermalink }}" 
             alt="{{ .Name | plainify }}" 
             loading="lazy">
      </div>
    {{- end }}
  </div>
</div>

{{- else }}
<div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-r-lg">
  <p class="text-sm font-medium text-yellow-700">Logo notice</p>
  <p class="text-sm text-yellow-600">
    No images found in folder: <code>assets/{{ $folder }}/</code>
  </p>
</div>
{{- end }}
