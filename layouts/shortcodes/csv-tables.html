{{/*
Standalone CSV Table - ESSENTIAL
Usage: {{< csv-table path="data/schedule.csv" >}}
*/}}

{{ $path := .Get "path" | default "schedule.csv" }}
{{ $csvResource := resources.Get $path }}

{{ if $csvResource }}
{{ $csvData := $csvResource | transform.Unmarshal (dict "delimiter" ",") }}
<div class="overflow-x-auto">
    <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
        <thead class="bg-gray-50 dark:bg-gray-700">
            {{ $header := index $csvData 0 }}
            <tr>
                {{ range $header }}
                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                    {{ . }}
                </th>
                {{ end }}
            </tr>
        </thead>
        <tbody class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
            {{ range $i, $row := after 1 $csvData }}
            <tr class="{{ if modBool $i 2 }}bg-gray-50 dark:bg-gray-700{{ end }}">
                {{ range $row }}
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100">
                    {{ . }}
                </td>
                {{ end }}
            </tr>
            {{ end }}
        </tbody>
    </table>
</div>
{{ else }}
<p class="text-red-500 dark:text-red-400">CSV file not found at '{{ $path }}'</p>
{{ end }}
